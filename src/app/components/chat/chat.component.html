<mat-sidenav-container class="chat-wrapper chat">
  <mat-sidenav class="chat__sidebar" #sidenav mode="side" [(opened)]="sideOpened">
    <mat-tab-group>
      <mat-tab label="Info">
        <app-chat-info></app-chat-info>
      </mat-tab>
      <mat-tab label="Team">
        <app-chat-users [users]="users" [online]="onlineUsers"></app-chat-users>
      </mat-tab>
      <mat-tab label="Files">Files should be here</mat-tab>


      <mat-tab label="Images">

        <div class="images__wrapper">
          <img class="images__item" *ngFor="let image of chatTeamImages" [src]=image alt="">
        </div>

        <div class="images__btn-wrapper">
        <label class="images__item--label">
            Add image
          <input (change)="onImagePicked($event)" accept=".jpg, .jpeg, .png" type="file"
                 class="images__item--input">
        </label>
        <button mat-raised-button color="accent"
                (click)="onImageUpload()" [disabled]="!isNewPhoto">
          Submit
        </button>
        </div>

        <p class="images__item--name" *ngIf="imageName">{{ imageName }}</p>
        <mat-error *ngIf="isImgTooBig" class="images__item--error">File should not be more than 1 mg</mat-error>
        <mat-error *ngIf="isImgUploadError" class="images__item--error">
          Sorry, something went wrong and we canâ€™t upload your image now. Please try again later.
        </mat-error>

      </mat-tab>



    </mat-tab-group>
  </mat-sidenav>
  <mat-sidenav-content class="chat__messages messages">
    <div (click)="sidenav.toggle()" class="sidenav-toggle">
      <mat-icon class="sidenav-toggle__icon">{{ sideOpened ? 'keyboard_arrow_left' : 'keyboard_arrow_right' }}</mat-icon>
    </div>
    <div class="messages__main">
      <ul class="messages__list">
        <li *ngFor="let message of groupedMessages" [ngClass]="message.user._id === user._id ? 'my-message': 'other-message'">
          <app-chat-profile-pic *ngIf="message.user._id !== user._id" [user]="message.user" [offset]="true"></app-chat-profile-pic>
          <app-chat-message [message]="message" [user]="user"></app-chat-message>
        </li>
      </ul>
    </div>
    <div class="messages__form">
      <form [formGroup]="chatForm" #formRef="ngForm" (ngSubmit)="sendMessage(chatForm.value)">
        <input formControlName="text" type="text" class="messages__input" required>
        <div class="send-icon" (click)="submitForm()">
          <mat-icon class="send-icon__icon">send</mat-icon>
        </div>
      </form>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
